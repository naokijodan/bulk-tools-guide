<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ぶんせき君 - カスタムカテゴリ設計案</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 40px 20px;
      color: #333;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    h1 {
      text-align: center;
      color: white;
      font-size: 2.5em;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    .subtitle {
      text-align: center;
      color: rgba(255,255,255,0.9);
      font-size: 1.2em;
      margin-bottom: 40px;
    }

    /* 現状の課題セクション */
    .problem-section {
      background: white;
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }
    .problem-section h2 {
      color: #e74c3c;
      margin-bottom: 20px;
      font-size: 1.5em;
    }
    .problem-table {
      width: 100%;
      border-collapse: collapse;
    }
    .problem-table th, .problem-table td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }
    .problem-table th {
      background: #f8f9fa;
      font-weight: 600;
      color: #555;
    }
    .problem-table tr:hover {
      background: #f8f9fa;
    }
    .status-bad {
      color: #e74c3c;
      font-weight: 500;
    }
    .status-want {
      color: #27ae60;
    }

    /* 設計案カード */
    .proposals {
      display: grid;
      gap: 30px;
    }
    .proposal-card {
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }
    .proposal-header {
      padding: 25px 30px;
      color: white;
      position: relative;
    }
    .proposal-header h2 {
      font-size: 1.4em;
      margin-bottom: 5px;
    }
    .proposal-header .badge {
      display: inline-block;
      background: rgba(255,255,255,0.2);
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.85em;
      margin-top: 8px;
    }
    .proposal-1 .proposal-header { background: linear-gradient(135deg, #3498db, #2980b9); }
    .proposal-2 .proposal-header { background: linear-gradient(135deg, #27ae60, #1e8449); }
    .proposal-3 .proposal-header { background: linear-gradient(135deg, #9b59b6, #8e44ad); }
    .proposal-4 .proposal-header { background: linear-gradient(135deg, #e67e22, #d35400); }
    .proposal-5 .proposal-header { background: linear-gradient(135deg, #1abc9c, #16a085); }

    .proposal-body {
      padding: 30px;
    }
    .proposal-body h3 {
      color: #444;
      font-size: 1.1em;
      margin: 20px 0 10px 0;
    }
    .proposal-body h3:first-child {
      margin-top: 0;
    }
    .proposal-body p {
      color: #666;
      line-height: 1.7;
      margin-bottom: 15px;
    }
    .proposal-body ul {
      margin-left: 20px;
      color: #666;
      line-height: 1.8;
    }
    .proposal-body li {
      margin-bottom: 8px;
    }

    /* コード例 */
    .code-block {
      background: #2d3748;
      color: #e2e8f0;
      padding: 20px;
      border-radius: 8px;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 0.9em;
      overflow-x: auto;
      margin: 15px 0;
    }
    .code-block .comment {
      color: #68d391;
    }
    .code-block .keyword {
      color: #f6ad55;
    }
    .code-block .string {
      color: #68d391;
    }

    /* UI モックアップ */
    .mockup {
      background: #f8f9fa;
      border: 2px solid #e9ecef;
      border-radius: 12px;
      padding: 20px;
      margin: 15px 0;
    }
    .mockup-title {
      font-weight: 600;
      color: #495057;
      margin-bottom: 15px;
      font-size: 0.9em;
    }
    .mockup-select {
      width: 100%;
      padding: 10px 15px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 1em;
      margin-bottom: 10px;
    }
    .mockup-input {
      width: 100%;
      padding: 10px 15px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 1em;
      margin-bottom: 10px;
    }
    .mockup-btn {
      background: linear-gradient(135deg, #f5a623, #f7931e);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
    }
    .mockup-rule {
      background: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 12px 15px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .mockup-rule .condition {
      background: #e3f2fd;
      color: #1976d2;
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 0.85em;
    }
    .mockup-rule .arrow {
      color: #999;
    }
    .mockup-rule .category {
      background: #e8f5e9;
      color: #388e3c;
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 0.85em;
    }

    /* メリット・デメリット */
    .pros-cons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }
    .pros, .cons {
      padding: 15px;
      border-radius: 8px;
    }
    .pros {
      background: #e8f5e9;
    }
    .cons {
      background: #ffebee;
    }
    .pros h4 {
      color: #2e7d32;
      margin-bottom: 10px;
    }
    .cons h4 {
      color: #c62828;
      margin-bottom: 10px;
    }
    .pros ul, .cons ul {
      margin-left: 18px;
      font-size: 0.9em;
    }
    .pros li {
      color: #2e7d32;
    }
    .cons li {
      color: #c62828;
    }

    /* 推奨度 */
    .recommendation {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 20px;
      padding: 15px;
      background: #fff3e0;
      border-radius: 8px;
    }
    .stars {
      color: #ff9800;
      font-size: 1.3em;
    }
    .rec-text {
      color: #e65100;
      font-weight: 500;
    }

    /* 比較表 */
    .comparison-section {
      background: white;
      border-radius: 16px;
      padding: 30px;
      margin-top: 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }
    .comparison-section h2 {
      color: #333;
      margin-bottom: 20px;
    }
    .comparison-table {
      width: 100%;
      border-collapse: collapse;
    }
    .comparison-table th, .comparison-table td {
      padding: 12px 15px;
      text-align: center;
      border: 1px solid #e0e0e0;
    }
    .comparison-table th {
      background: #f5f5f5;
      font-weight: 600;
    }
    .comparison-table td:first-child {
      text-align: left;
      font-weight: 500;
    }
    .check {
      color: #4caf50;
      font-size: 1.2em;
    }
    .cross {
      color: #f44336;
      font-size: 1.2em;
    }
    .partial {
      color: #ff9800;
      font-size: 1.2em;
    }

    /* 結論セクション */
    .conclusion-section {
      background: linear-gradient(135deg, #2c3e50, #34495e);
      border-radius: 16px;
      padding: 30px;
      margin-top: 30px;
      color: white;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }
    .conclusion-section h2 {
      margin-bottom: 20px;
    }
    .conclusion-section p {
      line-height: 1.8;
      opacity: 0.9;
    }
    .highlight-box {
      background: rgba(255,255,255,0.1);
      border-left: 4px solid #f5a623;
      padding: 20px;
      margin: 20px 0;
      border-radius: 0 8px 8px 0;
    }

    @media (max-width: 768px) {
      .pros-cons {
        grid-template-columns: 1fr;
      }
      h1 {
        font-size: 1.8em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ぶんせき君 カスタムカテゴリ設計案</h1>
    <p class="subtitle">専門セラー向け細分類機能の検討</p>

    <!-- 現状の課題 -->
    <div class="problem-section">
      <h2>現状の課題</h2>
      <table class="problem-table">
        <thead>
          <tr>
            <th>ジャンル</th>
            <th>現状</th>
            <th>欲しい細分類</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>ゲーム</strong></td>
            <td class="status-bad">「ゲーム」で一括</td>
            <td class="status-want">PS1 / PS2 / PS3 / PS4 / PS5 / Switch / レトロ / Xbox</td>
          </tr>
          <tr>
            <td><strong>トレカ</strong></td>
            <td class="status-bad">「コレクティブル」で一括</td>
            <td class="status-want">ポケモン(シリーズ別) / 遊戯王 / MTG / 鑑定済(PSA/BGS) / 未鑑定</td>
          </tr>
          <tr>
            <td><strong>時計（セイコー）</strong></td>
            <td class="status-bad">「セイコー」で一括</td>
            <td class="status-want">キングセイコー / グランドセイコー / プレザージュ / プロスペックス / その他</td>
          </tr>
          <tr>
            <td><strong>ジュエリー</strong></td>
            <td class="status-bad">ブランドのみ</td>
            <td class="status-want">ヴィンテージ / 現行品 / 素材別(ゴールド/シルバー/プラチナ)</td>
          </tr>
          <tr>
            <td><strong>バッグ</strong></td>
            <td class="status-bad">ブランドのみ</td>
            <td class="status-want">モデル別（ルイヴィトン: モノグラム/ダミエ/エピ など）</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- 設計案 -->
    <div class="proposals">

      <!-- 案1: カスタムカテゴリ専用シート -->
      <div class="proposal-card proposal-1">
        <div class="proposal-header">
          <h2>案1: カスタムカテゴリ専用シート</h2>
          <span class="badge">シンプル構成</span>
        </div>
        <div class="proposal-body">
          <h3>概要</h3>
          <p>シート6〜10をカスタムカテゴリ専用にし、ユーザーが独自のカテゴリルールを定義できるようにする。</p>

          <div class="code-block">
<span class="comment">// シート構成</span>
シート1〜5: <span class="string">通常シート（汎用カテゴリ判定）</span>
シート6〜10: <span class="string">カスタムシート（ユーザー定義ルール）</span>

<span class="comment">// カスタムシートの設定例</span>
シート6: <span class="keyword">"ゲームソフト分析"</span>
  - ルール1: "PS5" → PlayStation 5
  - ルール2: "PS4" → PlayStation 4
  - ルール3: "Switch" → Nintendo Switch
          </div>

          <div class="pros-cons">
            <div class="pros">
              <h4>メリット</h4>
              <ul>
                <li>既存機能への影響が少ない</li>
                <li>通常シートとカスタムシートを明確に分離</li>
                <li>実装がシンプル</li>
              </ul>
            </div>
            <div class="cons">
              <h4>デメリット</h4>
              <ul>
                <li>シート数が固定で制限される</li>
                <li>通常シートでカスタムルールが使えない</li>
                <li>柔軟性が低い</li>
              </ul>
            </div>
          </div>

          <div class="recommendation">
            <span class="stars">★★★☆☆</span>
            <span class="rec-text">シンプルだが柔軟性に欠ける</span>
          </div>
        </div>
      </div>

      <!-- 案2: シートごとにカテゴリモード選択 -->
      <div class="proposal-card proposal-2">
        <div class="proposal-header">
          <h2>案2: シートごとにカテゴリモード選択</h2>
          <span class="badge">プリセット方式</span>
        </div>
        <div class="proposal-body">
          <h3>概要</h3>
          <p>シート作成時または設定で「カテゴリモード」を選択。ジャンル別に最適化されたプリセットを提供。</p>

          <div class="mockup">
            <div class="mockup-title">シート設定画面イメージ</div>
            <select class="mockup-select">
              <option>汎用モード（現行の判定）</option>
              <option>ゲームモード（プラットフォーム別）</option>
              <option>トレカモード（シリーズ・鑑定別）</option>
              <option>時計モード（シリーズ別）</option>
              <option>ファッションモード（ライン別）</option>
              <option>カスタムモード（自分で定義）</option>
            </select>
          </div>

          <h3>プリセット例</h3>
          <ul>
            <li><strong>ゲームモード:</strong> PS1〜PS5, Xbox, Switch, レトロ, PC, モバイル</li>
            <li><strong>トレカモード:</strong> ポケモン, 遊戯王, MTG, ワンピース, 鑑定済(PSA/BGS/CGC), 未鑑定</li>
            <li><strong>時計モード:</strong> ブランド×シリーズ（セイコー→キングセイコー/グランドセイコー等）</li>
          </ul>

          <div class="pros-cons">
            <div class="pros">
              <h4>メリット</h4>
              <ul>
                <li>すぐに使える（設定不要）</li>
                <li>専門知識がなくても最適な分類</li>
                <li>ジャンル別ベストプラクティス提供</li>
              </ul>
            </div>
            <div class="cons">
              <h4>デメリット</h4>
              <ul>
                <li>プリセットにないジャンルに対応できない</li>
                <li>プリセットの更新・メンテナンスが必要</li>
                <li>細かいカスタマイズができない</li>
              </ul>
            </div>
          </div>

          <div class="recommendation">
            <span class="stars">★★★★☆</span>
            <span class="rec-text">使いやすいがカスタマイズ性に制限</span>
          </div>
        </div>
      </div>

      <!-- 案3: ルールビルダー -->
      <div class="proposal-card proposal-3">
        <div class="proposal-header">
          <h2>案3: ルールビルダー（条件式）</h2>
          <span class="badge">高カスタマイズ</span>
        </div>
        <div class="proposal-body">
          <h3>概要</h3>
          <p>ユーザーが「条件 → カテゴリ」のルールを自由に作成できるビルダーを提供。</p>

          <div class="mockup">
            <div class="mockup-title">ルール作成画面イメージ</div>
            <div class="mockup-rule">
              <span class="condition">タイトルに「PSA」を含む</span>
              <span class="arrow">→</span>
              <span class="category">鑑定済み</span>
            </div>
            <div class="mockup-rule">
              <span class="condition">タイトルに「King Seiko」を含む</span>
              <span class="arrow">→</span>
              <span class="category">キングセイコー</span>
            </div>
            <div class="mockup-rule">
              <span class="condition">タイトルに「PS5」AND「Game」を含む</span>
              <span class="arrow">→</span>
              <span class="category">PlayStation 5</span>
            </div>
            <button class="mockup-btn">+ ルールを追加</button>
          </div>

          <h3>条件タイプ</h3>
          <ul>
            <li><strong>含む:</strong> タイトルに特定の文字列が含まれる</li>
            <li><strong>含まない:</strong> 特定の文字列を除外</li>
            <li><strong>AND/OR:</strong> 複数条件の組み合わせ</li>
            <li><strong>正規表現:</strong> 高度なパターンマッチ（上級者向け）</li>
            <li><strong>価格帯:</strong> $100以上 → 高価格帯</li>
          </ul>

          <div class="pros-cons">
            <div class="pros">
              <h4>メリット</h4>
              <ul>
                <li>完全な自由度</li>
                <li>どんなジャンルにも対応可能</li>
                <li>複雑な条件も表現できる</li>
              </ul>
            </div>
            <div class="cons">
              <h4>デメリット</h4>
              <ul>
                <li>設定に手間がかかる</li>
                <li>初心者には難しい</li>
                <li>ルールの管理が煩雑になる可能性</li>
              </ul>
            </div>
          </div>

          <div class="recommendation">
            <span class="stars">★★★★☆</span>
            <span class="rec-text">パワーユーザー向け、学習コスト高</span>
          </div>
        </div>
      </div>

      <!-- 案4: AIアシスト分類 -->
      <div class="proposal-card proposal-4">
        <div class="proposal-header">
          <h2>案4: AIアシスト分類</h2>
          <span class="badge">AI活用</span>
        </div>
        <div class="proposal-body">
          <h3>概要</h3>
          <p>既存のAI機能を活用し、ユーザーが指定したカテゴリに自動分類。サンプルを学習させる方式。</p>

          <div class="mockup">
            <div class="mockup-title">AI分類設定イメージ</div>
            <input class="mockup-input" placeholder="カテゴリ名を入力（例: キングセイコー）" />
            <input class="mockup-input" placeholder="サンプルタイトル1: King Seiko 45-7001 Vintage..." />
            <input class="mockup-input" placeholder="サンプルタイトル2: KS Hi-Beat 5626-7000..." />
            <button class="mockup-btn">AIに学習させる</button>
          </div>

          <h3>仕組み</h3>
          <ul>
            <li>ユーザーがカテゴリ名とサンプルを数件提供</li>
            <li>AIがパターンを学習し、類似アイテムを自動分類</li>
            <li>分類結果を確認・修正することで精度向上</li>
          </ul>

          <div class="pros-cons">
            <div class="pros">
              <h4>メリット</h4>
              <ul>
                <li>ルール作成不要、サンプル提供だけ</li>
                <li>微妙なニュアンスも学習可能</li>
                <li>使うほど賢くなる</li>
              </ul>
            </div>
            <div class="cons">
              <h4>デメリット</h4>
              <ul>
                <li>API利用でコストがかかる</li>
                <li>精度が100%ではない</li>
                <li>AIの判断が不透明</li>
              </ul>
            </div>
          </div>

          <div class="recommendation">
            <span class="stars">★★★☆☆</span>
            <span class="rec-text">革新的だがコストと精度の課題</span>
          </div>
        </div>
      </div>

      <!-- 案5: ハイブリッド方式 -->
      <div class="proposal-card proposal-5">
        <div class="proposal-header">
          <h2>案5: ハイブリッド方式（推奨）</h2>
          <span class="badge">ベストバランス</span>
        </div>
        <div class="proposal-body">
          <h3>概要</h3>
          <p>案2（プリセット）+ 案3（ルールビルダー）を組み合わせ。初心者はプリセット、上級者はカスタムルールを使用。</p>

          <div class="mockup">
            <div class="mockup-title">設定画面イメージ</div>
            <select class="mockup-select">
              <option>ベースモード: ゲームモード（プリセット）</option>
            </select>
            <p style="margin: 10px 0; color: #666; font-size: 0.9em;">+ カスタムルールを追加:</p>
            <div class="mockup-rule">
              <span class="condition">「Limited Edition」を含む</span>
              <span class="arrow">→</span>
              <span class="category">限定版</span>
            </div>
            <div class="mockup-rule">
              <span class="condition">「Japanese」を含む</span>
              <span class="arrow">→</span>
              <span class="category">日本版</span>
            </div>
            <button class="mockup-btn">+ ルールを追加</button>
          </div>

          <h3>処理フロー</h3>
          <div class="code-block">
<span class="comment">// 判定優先順位</span>
1. <span class="keyword">カスタムルール</span>を先にチェック（ユーザー定義）
2. <span class="keyword">プリセットルール</span>でカテゴリ判定
3. <span class="keyword">汎用ルール</span>にフォールバック
4. マッチなし → <span class="string">"未分類"</span>
          </div>

          <h3>段階的な導入</h3>
          <ul>
            <li><strong>Phase 1:</strong> プリセットモードの実装（ゲーム、トレカ、時計）</li>
            <li><strong>Phase 2:</strong> シンプルなルールビルダー追加</li>
            <li><strong>Phase 3:</strong> ルールのインポート/エクスポート機能</li>
            <li><strong>Phase 4:</strong> コミュニティでルールセット共有</li>
          </ul>

          <div class="pros-cons">
            <div class="pros">
              <h4>メリット</h4>
              <ul>
                <li>初心者も上級者も満足</li>
                <li>段階的に学べる</li>
                <li>プリセット＋カスタムで最大の柔軟性</li>
                <li>コミュニティで成長可能</li>
              </ul>
            </div>
            <div class="cons">
              <h4>デメリット</h4>
              <ul>
                <li>実装が複雑</li>
                <li>UI設計が難しい</li>
                <li>段階的リリースが必要</li>
              </ul>
            </div>
          </div>

          <div class="recommendation">
            <span class="stars">★★★★★</span>
            <span class="rec-text">最も推奨 - バランスの取れた設計</span>
          </div>
        </div>
      </div>
    </div>

    <!-- 比較表 -->
    <div class="comparison-section">
      <h2>設計案 比較表</h2>
      <table class="comparison-table">
        <thead>
          <tr>
            <th>評価項目</th>
            <th>案1<br>専用シート</th>
            <th>案2<br>プリセット</th>
            <th>案3<br>ルールビルダー</th>
            <th>案4<br>AIアシスト</th>
            <th>案5<br>ハイブリッド</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>実装難易度</td>
            <td><span class="check">◎ 低</span></td>
            <td><span class="check">○ 中</span></td>
            <td><span class="partial">△ 高</span></td>
            <td><span class="cross">× 高</span></td>
            <td><span class="partial">△ 高</span></td>
          </tr>
          <tr>
            <td>使いやすさ（初心者）</td>
            <td><span class="check">○ 良</span></td>
            <td><span class="check">◎ 最良</span></td>
            <td><span class="cross">× 難</span></td>
            <td><span class="check">○ 良</span></td>
            <td><span class="check">◎ 最良</span></td>
          </tr>
          <tr>
            <td>カスタマイズ性</td>
            <td><span class="cross">× 低</span></td>
            <td><span class="partial">△ 中</span></td>
            <td><span class="check">◎ 最高</span></td>
            <td><span class="check">○ 高</span></td>
            <td><span class="check">◎ 最高</span></td>
          </tr>
          <tr>
            <td>拡張性</td>
            <td><span class="cross">× 低</span></td>
            <td><span class="check">○ 中</span></td>
            <td><span class="check">◎ 高</span></td>
            <td><span class="check">○ 中</span></td>
            <td><span class="check">◎ 高</span></td>
          </tr>
          <tr>
            <td>ランニングコスト</td>
            <td><span class="check">◎ なし</span></td>
            <td><span class="check">◎ なし</span></td>
            <td><span class="check">◎ なし</span></td>
            <td><span class="cross">× API費用</span></td>
            <td><span class="check">◎ なし</span></td>
          </tr>
          <tr>
            <td><strong>総合評価</strong></td>
            <td><span class="stars">★★★</span></td>
            <td><span class="stars">★★★★</span></td>
            <td><span class="stars">★★★★</span></td>
            <td><span class="stars">★★★</span></td>
            <td><span class="stars">★★★★★</span></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- 結論 -->
    <div class="conclusion-section">
      <h2>結論と推奨アプローチ</h2>

      <div class="highlight-box">
        <strong>推奨: 案5（ハイブリッド方式）の段階的実装</strong>
      </div>

      <p>
        専門セラーのニーズに応えるには、<strong>「すぐ使える」プリセット</strong>と<strong>「自由にカスタマイズできる」ルールビルダー</strong>の両方が必要です。
      </p>

      <h3 style="margin-top: 20px;">実装ロードマップ案</h3>

      <div class="highlight-box">
        <strong>Phase 1（v4.6）:</strong> シートごとにカテゴリモード選択<br>
        - 汎用 / ゲーム / トレカ / 時計 のプリセット<br>
        - 設定画面にモード選択UIを追加<br><br>

        <strong>Phase 2（v4.7）:</strong> シンプルなカスタムルール<br>
        - 「〇〇を含む → カテゴリX」形式のルール追加<br>
        - 最大20ルールまで<br><br>

        <strong>Phase 3（v4.8）:</strong> 高度なルールビルダー<br>
        - AND/OR条件、除外条件<br>
        - ルールの優先順位設定<br>
        - インポート/エクスポート<br><br>

        <strong>Phase 4（将来）:</strong> コミュニティ機能<br>
        - ルールセットの共有<br>
        - 人気ルールセットのランキング
      </div>

      <p style="margin-top: 20px;">
        まずはPhase 1の<strong>プリセットモード</strong>から始めて、ユーザーの反応を見ながら段階的に機能を拡充していくのが現実的です。
      </p>
    </div>

  </div>
</body>
</html>
